{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h4>Bets Created <small>{{ user.profile.bets_created }}</small></h4>
            <h4>Bets Taken <small>{{ user.profile.bets_taken }}</small></h4>
            <h4>Bets Won <small>{{ user.profile.wins }}</small></h4>
            <h4>Bets Lost <small>{{ user.profile.losses }}</small></h4>
            <h4>Funds: <small>${{ user.profile.d_amount }}</small></h4>
            <h1>Profile page</h1>
            <div class="thumbnail">
                {{ user.id }}
                {{ user.username }}
                {{ user.email }}
                {{ user.profile.avatar }}
            </div>

            <h4>site privileges</h4> 
            <div class="thumbnail">
            {% for role in user.roles %}
                {{ role.name }}
            {% endfor %}
            </div>

            <h4><u>Pending Bets</u></h4>
                {% if ou or sb or ml %}
                    {% for b in ou %}
                        {% if b.user_id == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}<br>
                            {{ b.vs }} {{ b.over_under }}{{ b.total_format }}<br>
                            <b>You: </b> {{ b.users.username }}<br>
                            <b>vs: </b>{{ b.taken_by }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% elif b.taken_by == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}<br>
                            {{ b.vs }} {{ b.opposite_over_under }}{{ b.total_format }}<br>
                            <b>You: </b>{{ b.taken_by }}<br>
                            <b>vs: </b>{{ b.users.username }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% endif %}
                    {% endfor %}
                    {% for b in sb %}
                        {% if b.user_id == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}<br>
                            {{ b.vs }} {{ b.team }}{{ b.ps_format }},<br>
                            <b>You: </b> {{ b.users.username }}<br>
                            <b>vs: </b>{{ b.taken_by }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% elif b.taken_by == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}<br>
                            {{ b.vs }} {{ b.opposite_team }}{{ b.opposite_ps }}<br>
                            <b>You: </b>{{ b.taken_by }}<br>
                            <b>vs: </b>{{ b.users.username }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% endif %}
                    {% endfor %}
                    {% for b in ml %}
                        {% if b.user_id == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}, 
                            {{ b.vs }} {{ b.team }}{{ b.ml }},<br>
                            <b>You: </b> {{ b.users.username }}<br>
                            <b>vs: </b>{{ b.taken_by }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% elif b.taken_by == current_user.id %}
                            <b>Game Key: </b>{{ b.game_key }}, 
                            <b>Bet Key: </b>{{ b.bet_key }},
                            <b>Game Date: </b>{{ b.game_date }}
                            {{ b.vs }} {{ b.opposite_team }}{{ b.opposite_ml }},<br>
                            <b>You: </b>{{ b.taken_by }}<br>
                            <b>vs: </b>{{ b.users.username }}<br>
                            <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br><hr>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <p>No pending bets at this time</p>
                {% endif %}
            

            <h4><u>Graded Bets</u></h4>
            {% if graded_sb or graded_ou or graded_ml %}
                {% for t in graded_ou %}
                    {% if t.user_id == current_user.id %}
                        <b>Game Key: </b>{{ t.game_key }}, 
                        <b>Bet Key: </b>{{ t.bet_key }},
                        <b>Game Date: </b>{{ t.game_date }}<br>
                        {{ t.vs }} {{ t.over_under }}{{ t.total_format }}<br>
                        <b>You: </b> {{ t.users.username }}<br>
                        <b>vs: </b>{{ t.taken_by }}<br>
                        <b>risk: </b>{{ t.amount }} / <b>win: </b>{{ t.amount_win }}<br>
                        {% if t.win==True %}Win +{{ t.amount_win }}{% elif t.win == False %}Lose -{{ t.amount }}{% endif %}<hr>
                    {% elif t.taken_by == current_user.id %}
                        <b>Game Key: </b>{{ t.game_key }}, 
                        <b>Bet Key: </b>{{ t.bet_key }},
                        <b>Game Date: </b>{{ t.game_date }}<br>
                        {{ t.vs }} {{ t.opposite_over_under }}{{ t.total_format }}
                        <b>Bet Taker: </b>{{ t.taken_by }}<br>
                        <b>opponent:  </b>{{ t.users.username }}<br>
                        <b>risk: </b>{{ t.amount }} / <b>win: </b>{{ t.amount_win }}<br>
                        {% if t.win == False %}Win +{{ t.amount_win }}{% elif t.win == True %}Lose -{{ t.amount }}{% endif %}<hr>
                    {% endif %}
                {% endfor %}
                {% for b in graded_sb %}
                    {% if b.user_id == current_user.id %}
                        <b>Game Key: </b>{{ b.game_key }}, 
                        <b>Bet Key: </b>{{ b.bet_key }},
                        <b>Game Date: </b>{{ b.game_date }}<br>
                        {{ b.vs }} {{ b.team }}{{ b.ps_format }}<br>
                        <b>You: </b> {{ b.users.username }}<br>
                        <b>vs: </b>{{ b.taken_by }}<br>
                        <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br>
                        {% if b.win==True %}Win +{{ b.amount_win }}{% elif b.win == False %}Lose -{{ b.amount }}{% endif %}<hr>
                    {% elif b.taken_by == current_user.id %}
                        <b>Game Key: </b>{{ b.game_key }}, 
                        <b>Bet Key: </b>{{ b.bet_key }},
                        <b>Game Date: </b>{{ b.game_date }}<br>
                        {{ b.vs }} {{ b.opposite_team }} {{ b.opposite_ps }}<br>
                        <b>You: </b>{{ b.taken_by }}<br>
                        <b>vs:  </b>{{ b.users.username }}<br>
                        <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.amount_win }}<br>
                        {% if b.win == False %}Win +{{ b.amount_win }}{% elif b.win == True %}Lose -{{ b.amount }}{% endif %}<hr>
                    {% endif %}
                {% endfor %}
                {% for b in graded_ml %}
                    {% if b.user_id == current_user.id %}
                        <b>Game Key: </b>{{ b.game_key }}, 
                        <b>Bet Key: </b>{{ b.bet_key }},
                        <b>Game Date: </b>{{ b.game_date }}<br>
                        {{ b.vs }} {{ b.team }} {{ b.ml }}<br>
                        <b>You: </b> {{ b.users.username }}<br>
                        <b>vs: </b>{{ b.taken_by }}<br>
                        <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.ml_win }}<br>
                        {% if b.win==True %}Win +{{ b.ml_win }}{% elif b.win == False %}Lose -{{ b.amount }}{% endif %}<hr>
                    {% elif b.taken_by == current_user.id %}
                        <b>Game Key: </b>{{ b.game_key }}, 
                        <b>Bet Key: </b>{{ b.bet_key }},
                        <b>Game Date: </b>{{ b.game_date }}<br>
                        {{ b.vs }} {{ b.opposite_team }} {{ b.opposite_ml }}<br>
                        <b>You: </b>{{ b.taken_by }}<br>
                        <b>vs:  </b>{{ b.users.username }}<br>
                        <b>risk: </b>{{ b.amount }} / <b>win: </b>{{ b.ml_win }}<br>
                        {% if b.win == False %}Win +{{ b.ml_win }}{% elif b.win == True %}Lose -{{ b.amount }}{% endif %}<hr>
                    {% endif %}
                {% endfor %}
            {% else %}
                <p>No graded bets at this time</p>
            {% endif %}

        </div>
    </div>
</div>

{% endblock %}